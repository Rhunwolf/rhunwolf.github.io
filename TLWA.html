	<!DOCTYPE HTML PUBLIC>
	<html>
	<meta charset="utf-8">
	<head>
		<link rel="shortcut icon" href="img/faviconTWLA.ico" type="image/x-icon">
		<title>The Longest Way Alone</title>
		<style type="text/css">
			body { 
				background-image: url(img/tlwa/background.png);
				background-position: left bottom;
				background-repeat: repeat;
			}   
		</style>
	</head>
	<body onload="menuMainStartNewGame()"> 
	<TABLE BORDER="0" WIDTH="100%" HEIGHT="100%">
		<TR HEIGHT="20">
			<TD align="right">
				<div id="musicBar"><!-- id=musicBar --></div>
			</TD>
		</TR>
		<TR>
			<TD align="center">
				<TABLE BORDER="0" WIDTH="1024" HEIGHT="512" BGCOLOR="#F0F0F0">
					<TR WIDTH="1024">
						<TD WIDTH="512" HEIGHT="512" rowspan="2" BGCOLOR="#FFFAFA">
							<div align="center" style="height:512px; border: 2px solid #CCC;"><img id="imageBar" src="img/tlwa/TWLALOGO.png" width="512" height="512"><!-- id=imageBar --></div>
						</TD>
						<TD WIDTH="232" HEIGHT="128" BGCOLOR="#FFFAFA">
							<div id="statusBar" style="height:115px; border: 2px solid #CCC; padding: 12px 10px 0px; font-size:11pt; color:#444444" align="left"><!-- id=statusBar --></div>
							<div id="statusBar" style="height:115px; border: 2px solid #CCC; padding: 12px 10px 0px; font-size:11pt; color:#444444" align="left">
							    <div id="gameInfo" style="display:block;height:115px; border: 2px solid #CCC; padding: 12px 10px 0px; font-size:11pt; color:#444444" align="left">COOL GAME!!!</div>
							    <div id="shipStatus" style="display:none;height:115px; border: 2px solid #CCC; padding: 12px 10px 0px; font-size:11pt; color:#444444" align="left">Диагостика состояния<br>    бортовых систем ''USE'': <br><br>   • Топливо: <span id="fuelStatus">0<span> тонн; <br>   • Корпус: <span id="hullStatus">0<span>%; <br>   • Оборудование: <span id="equipStatus">0<span>%.</div>
							</div>

						</TD>
						<TD WIDTH="280" HEIGHT="128" BGCOLOR="#FFFAFA">
							<div id="journeyBar" style="height:115px; border: 2px solid #CCC; padding: 12px 10px 0px; font-size:11pt; color:#444444" align="left"><!-- id=journeyBar --></div>
						</TD>
					</TR>
					<TR>
						<TD WIDTH="512" HEIGHT="384" colspan="2" BGCOLOR="#FFFAFA">
							<TABLE BORDER="0" WIDTH="512" HEIGHT="384">
								<TR>
									<TD>
										<div id="actionBar" style="height:320px; border: 2px solid #CCC; padding: 10px 10px 5px; font-size:14pt; color:#000000" align="left"><!-- id=actionBar --></div>
									</TD>
								</TR>
								<TR>
									<TD>
										<div id="buttonBar" style="height:20px; border: 2px solid #CCC; padding: 5px 5px 5px;" align="center"><!-- id=buttonBar --></div>
									</TD>
								</TR>
							</TABLE>
						</TD> 
					</TR>
				</TABLE>
			</TD>
		</TR>
		<TR>
			<TD align="center">
			<div id="debugBar"><!-- id=debugBar --></div>
			</TD>
		</TR>
	</TABLE>
	<script type="text/javascript">
			/*
		Автор игры Дима Тэлэри https://vk.com/rhunwolf
		Эта игра сделана как первое упраженине в программировании вообще, поэтому здесь будет очень много комментариев и местами неоптимальный код, не обращайте внимания ;)
		TODOLIST https://docs.google.com/document/d/1rpOwWv9KP3oyCCd7M7uI6qTbsBDkN5Oiv6SxTRmfDxc/edit
			*/
					
			// ПЕРЕМЕННЫЕ
			
			const maxTravelLength = 41248; 			// расстояние до Альфы Центавра, Астры и Бейкера, среднее, млрд км
			var ship = null;						// объект корабль
			var Asteroid1 = null;					// объект астероид1
			var Asteroid2 = null;					// объект астероид2
			var AsteroidChosen = null;				// объект выбранный астероид
			var systemsOfPlanet = null;				// объект системы планет Центавра
			<!-- var unseenEvents = null;				// объект событий  --> сделать
			<!-- var allTexts = null;					// объект всех текстов --> сделать
			
			var EventWasShown01 = false;
			var EventWasShown02 = false;
			var EventWasShown03 = false;
			var EventWasShown04 = false;

		function getRandomInt(min, max) {
			return Math.floor(Math.random() * (max - min + 1)) + min; // генератор случайного числа с заданными границами включительно
		}
		
		// ИЗМЕНЕНИЯ ОКОН
			
		function updateImageBar(img) {
			document.getElementById("imageBar").src = (img);
		}

		function updateActionBar(text) {
			document.getElementById("actionBar").innerHTML = (text);
		}

		function updateStatusBar(text) {
			document.getElementById("statusBar").innerHTML = (text);
		}
		
		function updateJourneyBar(text) {
			document.getElementById("journeyBar").innerHTML = (text);
		}
		
		function updateButtonBar(text) {
			document.getElementById("buttonBar").innerHTML = (text);
		}
		
		function updateMusicBar(file) {
			document.getElementById("musicBar").innerHTML = (file);
		}

		// ГЕНЕРАТОР ОБЪЕКТА КОРАБЛЬ
		
		function Ship() {
			this.fuel = 150;					// запас топлива, восстанавливается
			this.hull = 100;					// прочность корпуса, восстанавливается
			this.equip = 100;					// сохранность оборудования, не восстанавливается
			this.mass = this.fuel + 10;			// масса корабля: топливо + конструкция ракеты и ценнейший груз 10-15т
			this.causeOfDeath = "";				// причина гибели
			this.pointOfDeath = "";				// место гибели
			this.travelLength = 0;				// пробег корабля, млрд км
			this.travelYears = 0;				// пробег корабля, лет
			this.inYellowZone = false;
			this.inRedZone = false;
			this.zoneDifficulty = 0;
			this.countFuelSpent = 0;			// счётчик потраченного топлива
			this.countAsteroidsVisited = 0;		// счётчик посещенных астероидов
			this.countObjectsMined = 0;			// счётчик разработанных месторождений
		}

		Ship.prototype.isAlive = function() { 	// проверка, жив ли
				if (this.fuel <= 0) {
					this.fuel = 0;
					if (this.hull <= 0) { 		// есть вероятность, что одновременно меньше нуля станет и топливо и корпус
						this.hull = 0;
						this.equip = 0;
					}
					this.causeOfDeath = "Топливо закончилось и была потеряна возможность корректировать курс.";
					return false;
				} 
				
				if (this.hull <= 0) {
					this.hull = 0;
					this.equip = 0;
					this.causeOfDeath = "Защитный корпус корабля разрушен. Из-за этого оборудование корабля вскоре пришло в негодность.";
					return false;
				}
				
				if (this.equip <= 0) {
					this.equip = 0;
					this.causeOfDeath = "Оборудование корабля пришло в негодность.";
					return false;
				}
		        return true;
		}
		
		Ship.prototype.fuelNeedToFlight = function(exampleDistance) {	// предполагаем, сколько потребуется топлива на прыжок
			
			var fuelTemp = this.fuel;
			var massTemp = this.mass;
					
			for (var i = 1; i <= exampleDistance; i++) {				// предполагаем расход топлива за каждый километр отдельно
				fuelTemp -= ((1/35)*(massTemp/100));
				massTemp = fuelTemp + 10;
			}
			
			fuelTemp = Math.round(fuelTemp); 			
			return this.fuel - fuelTemp;								// return расчёт
		}	

		Ship.prototype.flyEachKilometer = function(exampleDistance) { 	// расход топлива, износ корабля
		
				for (var i = 1; i <= exampleDistance; i++) { 			// вычитаем расход топлива за каждый километр отдельно, округляем в самом конце, меняем вес корабля
			
					if (this.fuel <= 0) {
						this.fuel = 0;
						break;
					} else {
						this.fuel -= ((1/35)*(this.mass/100));
						this.mass = this.fuel + 10;
						this.travelLength++;
					}
				}

				this.fuel = Math.round(this.fuel);
				this.mass = Math.round(this.mass);
				this.travelYears += Math.round(exampleDistance / (maxTravelLength / 10000)); // изменение числа лет полёта в игре
				
//				if (exampleDistance > 1) {					// износ оборудования и корпуса, только если пройдена дистанция более 1 миллиарда километров
					this.damageHull(Math.round(exampleDistance/300) + getRandomInt(3, 5)); 
					this.damageEquip(getRandomInt(1, 3));
//				}
		}

		Ship.prototype.damageEquip = function(amount) { // урон корпусу
			this.equip -= amount;
			if (this.equip <= 0) {
				this.equip = 0;
			}
		}
		
		Ship.prototype.damageHull = function(amount) { // урон корпусу
			this.hull -= amount;
			if (this.hull <= 0) {
				this.hull = 0;
			}
		}

		Ship.prototype.repairHull = function(amount) { // починка корпуса
			this.hull += amount;
			if (this.hull >= 100) {
				this.hull = 100;
			}
		}

		Ship.prototype.spendFuel = function(amount) { // потратить топливо
			this.fuel -= amount;
			if (this.fuel <= 0) {
				this.fuel = 0;
			}
			this.mass = this.fuel + 10;
		}

		Ship.prototype.refuel = function(amount) { // заправить топливом
			this.fuel += amount;
			this.mass = this.fuel + 10;
		}

		Ship.prototype.displayStatus = function() {
		    return "Диагостика состояния<br>    бортовых систем ''USE'': <br><br>   • Топливо: " +this.fuel+ " тонн; <br>   • Корпус: " +this.hull+ "%; <br>   • Оборудование: " +this.equip+ "%.";
		}

		// ГЕНЕРАТОР ОБЪЕКТА АСТЕРОИД
		
		function generateAsteroid() {
		
		    var ast = {
			  name: "A-",
			  dist: 0,
			  prob: 0,
			  size: 0,
			  fuelRequired: 0, // расход топлива на прыжок к первому астероиду
			  fields: [],
			  anomaly: []
			};
			
			var matrixOfFields = [
				["Ледник, ресурсы есть.", "Ледник, ресурсы есть.", "Ледник, ресурсы есть.", "Жила, ресурсы есть.", "Пустошь, ресурсов нет."], 
				[50, 40, 30, 20, 10], // вероятность неуспешной добычи
				[10, 15, 15, 20, 20, 20, 25, 25, 30] // размер добычи
			];

			var matrixOfAnomalies = [
				["значительная гравитация", "ресурсы глубокого залегания", "свита мелких астероидов", "искривленная поверхность", "высокая скорость вращения", "химически-активный грунт"], // названия проблем, ряд 0
				[10, 20, 20, 30], 			// вероятность срабатывания аномалии
				[2, 3, 3, 4, 4, 4, 5, 5, 6] // максимально возможный урон от аномалии
			];
			
			// проверяем зону сложности, если Yellow или Red - то увеличиваем вероятности плохих происшествий
				
			if (ship.inYellowZone) {
				matrixOfFields[0].push("Пустошь, ресурсов нет."); 	// увеличиваем вероятность появления пустошей
				matrixOfAnomalies[1].push(40, 50); 					// увеличиваем вероятность срабатывания аномалий
			} 
			
			if (ship.inRedZone) {
				matrixOfFields[0].push("Пустошь, ресурсов нет.");
				matrixOfAnomalies[1].push(60, 70); 
			}
			
			var nameLength = getRandomInt(4, 7);
			
			var AsteroidNameGenerator = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, "Q", "W", "E", "R", "T", "Y", "U", "I", "O", "P", "A", "S", "D", "F", "G", "H", "J", "K", "L", "Z", "X", "C", "V", "B", "N", "M"];
			
			for (var i = 1; i <= nameLength; i++) {
			    var RandArray = Math.floor(Math.random() * AsteroidNameGenerator.length);
				ast.name = ast.name + (AsteroidNameGenerator[RandArray]).toString();
			}
			
			var NewDist = getRandomInt(1, 100);
			var NewProb = getRandomInt(1, 100);
			var NewSize = getRandomInt(1, 100);
			
			// генерация дистанции до астероида
			if (NewDist >= 81) {
				ast.dist = 1825 + getRandomInt(0, 400);
			} else if (NewDist >= 51) {  				// 5,0% расстояния 2063 вероятность 20%
				ast.dist = 1425 + getRandomInt(0, 400);
			} else if (NewDist >= 21) { 				// 4,0% расстояния 1650 вероятность 30%
				ast.dist = 1025 + getRandomInt(0, 400);
			} else { 									// 3,0% расстояния 1238 вероятность 30%
				ast.dist = 625 + getRandomInt(0, 400);
			} 											// 2,0% расстояния 825, 1% это 412,5, 0,5% это 206 вероятность 20%

			// генерация сложности астероида
			if (NewProb >= 51 - ship.zoneDifficulty) {
				ast.prob = 1; 
			} else {
				ast.prob = 0; 
			}

			// генерация размера астероида
			if (NewSize >= 91) {
				ast.size = 4; 
			} else if (NewSize >= 71) {
				ast.size = 3; 
			} else if (NewSize >= 31) {
				ast.size = 2; 
			} else if (NewSize >= 11) {
				ast.size = 1; 
			} else {
				ast.size = 0;
				ast.prob = 0; 
			}
						
			ast.fuelRequired = ship.fuelNeedToFlight(ast.dist);
	
			tempAnomaly = []; // временная аномалия, для приравнивания к массиву ast.anomaly
				
			if (ast.prob == 1) {
				var anomalyNameRand = Math.floor(Math.random() * matrixOfAnomalies[0].length);
				var anomalyChanceRand = Math.floor(Math.random() * matrixOfAnomalies[1].length);
				var anomalyDamageRand = Math.floor(Math.random() * matrixOfAnomalies[2].length);
			
				tempAnomaly.push(matrixOfAnomalies[0][anomalyNameRand]);
				tempAnomaly.push(matrixOfAnomalies[1][anomalyChanceRand]);
				tempAnomaly.push(matrixOfAnomalies[2][anomalyDamageRand]);
		
			} else {
				tempAnomaly = ["отсутствует", 0, 0, "здесь&nbspотносительно&nbspбезопасно", 0];
			}
			
			if (tempAnomaly[0] == "значительная гравитация" || tempAnomaly[0] == "высокая скорость вращения") {
				tempAnomaly.push("вероятность затратить больше топлива при посадке к месторождению");
				tempAnomaly.push("топлива");
			} 
			else if (tempAnomaly[0] == "ресурсы глубокого залегания") {
				tempAnomaly.push("вероятность затратить больше топлива при добыче ресурсов");
				tempAnomaly.push("топлива");
			} 
			else if (tempAnomaly[0] == "химически-активный грунт" || tempAnomaly[0] == "свита мелких астероидов" || tempAnomaly[0] == "искривленная поверхность") {
				tempAnomaly.push("вероятность повредить корпус при посадке к месторождению");
				tempAnomaly.push("корпуса");
			}

			ast.anomaly = tempAnomaly;
	
			// перебором достать по одному из матрицы столько месторождений, каков размер астероида
			// цикл работает до тех пор, пока выполняется условие i <= ast.size (условие продолжения)
			// записываем в пустой массив tempField инфу по этому месторождению, затем до 4 таких месторождений в матрицу ast.fields
	
			for (var i = 1; i <= ast.size; i++) { // генерим до 4 объектов, i = 1 чтобы считать не с нуля, иначе при  ast.size = 4 у нас будет 5 объектов
				
				var tempField = []; // временное месторождение, для пуша в матрицу ast.fields
				var fieldNameRand = Math.floor(Math.random() * matrixOfFields[0].length);
				var fieldSimplicityRand = Math.floor(Math.random() * matrixOfFields[1].length);
				var fieldRichRand = Math.floor(Math.random() * matrixOfFields[2].length);
				
				tempField.push(matrixOfFields[0][fieldNameRand]); // а если у нас Пустошь, то fieldSimplicityRand и fieldRichRand = 0
						
				if (tempField[0] == "Пустошь, ресурсов нет.") {
					tempField.push(0);
					tempField.push(0);
					tempField.push("Пустошь");
				}
				else {
					tempField.push(matrixOfFields[1][fieldSimplicityRand]);
					tempField.push(matrixOfFields[2][fieldRichRand]);
					if (tempField[0] == "Ледник, ресурсы есть.") {
						tempField.push("Ледник");
					} else if (tempField[0] == "Жила, ресурсы есть.") {
						tempField.push("Жила");
					}
				}
				
				ast.fields.push(tempField);
			}

		    return ast;
		}

		// ГЕНЕРАТОР ОБЪЕКТА СИСТЕМЫ ЦЕНТАВРА
		
		function generateSystemsOfPlanet() {
		
			var preparedCentauriSistems = {
				planetsOfProxima: [],
				planetsOfAstra: [],
				planetsOfBaker: [],
				point: 0,
				planetChosen: []
			}
			
			var matrixOfCentauriPlanets = [
					["Проксима I", "Астра I", "Астра II", "Астра III", "Бейкер I", "Бейкер II", "Бейкер III", "Бейкер IV"], 	// planetName [0]
					["Cold", "Cold", "Warm", "Warm", "Warm", "Hot", "Hot", "Hot"], 												// planetTemperature [1] жара RED COLD
					["Lifeless", "Lifeless", "Lifeless", "Mosses", "Mosses", "Forests", "Forests", "Forests"], 					// planetOrganic [2] наличие органики GREEN GREY
					["Dry", "Dry", "Dry", "Humid", "Humid", "Flood", "Flood", "Flood"] 											// planetWater [3] насыщенность водой BLUE SAND
			];
			
			var tempCentauriSistems = []; // "перевалочный" массив
				
				// генерирует случайную планету из массива, потом удаляет использованные значения
				// у нас прегенеренное число планет (8), и такое же число значений в каждой строке matrixOfCentauriPlanets
				
			for (var i = 0; i <= 7; i++) { // получаем матрицу, строки - планеты, столбцы - название, температурный режим, жизнь, сухость, пригодность для жизни
				var tempPlanet = [];
					
				var planetName = Math.floor(Math.random() * matrixOfCentauriPlanets[0].length);
				var planetTemperature = Math.floor(Math.random() * matrixOfCentauriPlanets[1].length);
				var planetOrganic = Math.floor(Math.random() * matrixOfCentauriPlanets[2].length);
				var planetWater = Math.floor(Math.random() * matrixOfCentauriPlanets[3].length);
				var planetLiveable = 0;
				
				tempPlanet.push(matrixOfCentauriPlanets[0][planetName]); // записываем в матрицу tempPlanet
				matrixOfCentauriPlanets[0].splice (planetName,1); // удаляем записанное из матрицы matrixOfCentauriPlanets
				
				tempPlanet.push(matrixOfCentauriPlanets[1][planetTemperature]);
				matrixOfCentauriPlanets[1].splice (planetTemperature,1);
				
				tempPlanet.push(matrixOfCentauriPlanets[2][planetOrganic]);
				matrixOfCentauriPlanets[2].splice (planetOrganic,1);
					
				tempPlanet.push(matrixOfCentauriPlanets[3][planetWater]);
				matrixOfCentauriPlanets[3].splice (planetWater,1);
					
					if (tempPlanet[1] == "Cold") { // оцениваем пригодность для жизни у получившейся планеты, результат от 0 до 6
						planetLiveable += 1;
					} else if (tempPlanet[1] == "Warm") {
						planetLiveable += 2;
					} else if (tempPlanet[1] == "Hot") {
						planetLiveable += 1;
					}
						
					if (tempPlanet[2] == "Lifeless") { 
						planetLiveable -= 1; 					// минус!
					} else if (tempPlanet[2] == "Mosses") {
						planetLiveable += 1;
					} else if (tempPlanet[2] == "Forests") {
						planetLiveable += 2;
					}
						
					if (tempPlanet[3] == "Dry") { 
						planetLiveable += 0;
					} else if (tempPlanet[3] == "Humid") {
						planetLiveable += 1;
					} else if (tempPlanet[3] == "Flood") {
						planetLiveable += 2;
					}
					
				tempPlanet.push(planetLiveable)  
				tempCentauriSistems.push(tempPlanet); // записываем получившуюся планету в матрицу, повторяем это еще 7 раз
			}
				
			tempCentauriSistems.sort(function(a, b) { return a[0] == b[0] ? a > b : a[0] > b[0] }); // сортировка по первому столбцу 
				
			for (var i = 0; i <= 7; i++) { // разделяем общую матрицу на три отдельных
				
				if (tempCentauriSistems[i][0] == "Проксима I") {
					preparedCentauriSistems.planetsOfProxima.push(tempCentauriSistems[i]);
				} else if (tempCentauriSistems[i][0] == "Астра I" || tempCentauriSistems[i][0] == "Астра II" || tempCentauriSistems[i][0] == "Астра III") {
					preparedCentauriSistems.planetsOfAstra.push(tempCentauriSistems[i]);
				} else if (tempCentauriSistems[i][0] == "Бейкер I" || tempCentauriSistems[i][0] == "Бейкер II" || tempCentauriSistems[i][0] == "Бейкер III" || tempCentauriSistems[i][0] == "Бейкер IV") {
					preparedCentauriSistems.planetsOfBaker.push(tempCentauriSistems[i]);
				}
			}
			
			return preparedCentauriSistems;
		}			
		
		// ОБЪЕКТ МАССИВ СОБЫТИЙ
		
	/*
			EventWasShown01 = false;
			EventWasShown02 = false;
			EventWasShown03 = false;
			EventWasShown04 = false;
	*/

		// ОБЪЕКТ МАССИВ ТЕКСТОВ
		
		
		// МЕНЮ		
		
		function menuMainStartNewGame() { // запуск главного меню с перезапуском музыки и перегенерацией всего
			updateMusicBar("<audio controls autoplay loop><source src='music/P_C_III_-_01_-_Exit_Exit_cut.mp3' type='audio/mpeg'></audio>");
			
			updateDebugBar(); // отладочная панель, НЕ УДАЛЯТЬ

			ship = new Ship(); // обнуляем статус, т.к. игрок может перезапустить игру, не перезапуская окно
			systemsOfPlanet = generateSystemsOfPlanet();							// создаем 8 планет
			menuMainWithoutRestartGame();
		}
		
		function menuMainWithoutRestartGame() {
			updateStatusBar("<center><br><strong><font style='font-size:18pt;' color='#444444'>The Longest<br>Way Alone<br>ver. 0.2</font></strong></center>");
			updateJourneyBar("<br><font style='font-size:12pt;' color='#444444'>&nbsp&nbsp&nbspПроцедурно-генерируемая браузерная игра по мотивам рассказа Вернора&nbspВинджа ''Дальний&nbspприцел''.</font><br>");
			updateActionBar("<center><br><br><br><br><br><br> <input type='button' value='Новая игра' onclick='menuNewGame()'> </center>");
			updateImageBar("img/tlwa/TWLALOGO.png");
			updateButtonBar("<input type='button' value='Обучение' onclick='menuTutorialGeneral();'> &nbsp&nbsp&nbsp <input type='button' value='О создателях' onclick='menuCredits()'>");
		}
			
		function menuTutorialGeneral() {
			updateActionBar("<br>&nbsp&nbsp&nbspТвоя миссия — достичь системы Альфы Центавра. По пути тебе нужно будет:<br>&nbsp&nbsp&nbsp&nbsp&nbsp• следить за <b>состоянием корабля</b>, вовремя добывая ресуры;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• выбирать наиболее богатые и безопасные <b>астероиды для добычи</b>;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• по прибытии провести <b>спектральный анализ</b> и выбрать наиболее подходящую планету земного типа.<br><br>&nbsp&nbsp&nbspАккуратно балансируй между тратой топлива и добычей ресурсов, и ты сможешь достигнуть точки назначения, преодолев 41248 миллиардов километров космоса, отделяющих Солнце от системы Альфы Центавра.");
			updateImageBar("img/tlwa/read.png");
			updateButtonBar("<input type='button' value='Параметры корабля' onclick='menuTutorialShipStatus()'>&nbsp&nbsp&nbsp<input type='button' value='Добыча ресурсов' onclick='menuTutorialAsteroids()'>&nbsp&nbsp&nbsp<input type='button' value='Анализ планет' onclick='menuTutorialSpectralAnalysis()'>&nbsp&nbsp&nbsp<input type='button' value='В меню' onclick='menuMainWithoutRestartGame()'>&nbsp&nbsp&nbsp");
		}  
		
		function menuTutorialShipStatus() {
			updateActionBar("<br>&nbsp&nbsp&nbspУ тебя есть 4 основных параметра:<br>&nbsp&nbsp&nbsp&nbsp&nbsp• масса и запас топлива;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• прочность корпуса и сохранность оборудования.<br><br>&nbsp&nbsp&nbsp<b>Топливо</b> расходуется на полёт и добычу ресурсов. Чем меньше твоя <b>масса</b>, тем ты меньше тратишь топлива при движении.<br>&nbsp&nbsp&nbsp<b>Корпус</b> и <b>оборудование</b> разрушаются в процессе полета и от аномалий. Корпус можно восстанавливать.<br>&nbsp&nbsp&nbspЕсли один из параметров упадет до нуля, то твоя миссия завершится неудачей.");
			updateButtonBar("<input type='button' value='Назад' onclick='menuTutorialGeneral()'>");
		}
		
		function menuTutorialAsteroids() {
			updateActionBar("<br>&nbsp&nbsp&nbspВ процессе игры ты будешь совершать перелёты между астероидами. Они отличаются:<br>&nbsp&nbsp&nbsp&nbsp&nbsp• <b>дальностью</b> (затраты топлива и % пройденного пути);<br>&nbsp&nbsp&nbsp&nbsp&nbsp• <b>размером</b> (потенциальное богатство ресурсами);<br>&nbsp&nbsp&nbsp&nbsp&nbsp• наличием в них <b>аномалии</b> (повреждение корабля при добыче ресурсов).<br><br>&nbsp&nbsp&nbspПрибыв к астероиду, ты можешь добыть ресурсы и &frasl; или лететь дальше.<br>&nbsp&nbsp&nbspВ леднике можно добыть водород для <b>топлива</b>, в жиле — металлы для починки <b>корпуса</b>.");
			updateButtonBar("<input type='button' value='Назад' onclick='menuTutorialGeneral()'>");
		}
		
		function menuTutorialSpectralAnalysis() {
			updateActionBar("<br>&nbsp&nbsp&nbspПеред тем, как ты покинешь Солнечную систему, тебе нужно попрактиковаться в спектральном анализе. Сравни планеты нашей системы и запомни, чем отличается Земля от остальных планет.<br><br><div id='PlanetBoxInActionBar' align='right'>Меркурий:&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>Венера:&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>Земля:&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>Марс:&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'></div>");
			updateButtonBar("<input type='button' value='Провести анализ' onclick='doAnalysisSolar()'>&nbsp&nbsp&nbsp<input type='button' value='Назад' onclick='menuTutorialGeneral()'>");
		}
		
		function menuCredits() {
			updateActionBar("<center><font style='font-size:12pt;' color='#444444'>Над игрой работали:</font></center><br>&nbsp&nbsp&nbsp<strong>Дмитрий Тэлэри</strong> — геймдизайн, программирование<br>&nbsp&nbsp&nbsp<strong>Светлана Михина</strong> — графика, тестирование<br><br><center><font style='font-size:12pt;' color='#444444'>Благодарности:</center><br>&nbsp&nbsp&nbsp<strong>Сергей Болгов</strong> — помощь с рефакторингом.<br>&nbsp&nbsp&nbsp<strong>Леонид Галкин</strong> — помощь с html.<br>&nbsp&nbsp&nbsp<strong>Вернор Виндж</strong> — за то, что пишет <a href='https://goo.gl/cwGDWx' target='_blank'>книги</a>.<br>&nbsp&nbsp&nbsp<strong>Альфа Центавра</strong> — просто за то, что ты <a href='https://goo.gl/wn2I4w' target='_blank'>есть</a>.<br>&nbsp&nbsp&nbspИллюстрации авторства <b>Delapouite</b>, <b>Lorc</b> и <b>Skoll</b><br>(лицензия CC BY 3.0 <a href='http://game-icons.net/' target='_blank'>game-icons.net</a>).<br>&nbsp&nbsp&nbspМузыка авторства <b>P C III</b>, <b>.crk</b> и <b>Ketsa</b><br>(лицензия CC BY 3.0 <a href='http://freemusicarchive.org/' target='_blank'>freemusicarchive.org</a>).<br>&nbsp&nbsp&nbspИгра сделана после прохождения на портале <a href='https://geekbrains.ru/' target='_blank'>geekbrains.ru</a> курса ''Основы программирования''. </font>");
			updateImageBar("img/tlwa/power-generator.png");
			updateButtonBar("<input type='button' value='В меню' onclick='menuMainWithoutRestartGame()'>");
		}
		
		function menuCreditsNewGame() {
			updateActionBar("<center><font style='font-size:12pt;' color='#444444'>Над игрой работали:</font></center><br>&nbsp&nbsp&nbsp<strong>Дмитрий Тэлэри</strong> — геймдизайн, программирование<br>&nbsp&nbsp&nbsp<strong>Светлана Михина</strong> — графика, тестирование<br><br><center><font style='font-size:12pt;' color='#444444'>Благодарности:</center><br>&nbsp&nbsp&nbsp<strong>Сергей Болгов</strong> — помощь с рефакторингом.<br>&nbsp&nbsp&nbsp<strong>Леонид Галкин</strong> — помощь с html.<br>&nbsp&nbsp&nbsp<strong>Вернор Виндж</strong> — за то, что пишет <a href='https://goo.gl/cwGDWx' target='_blank'>книги</a>.<br>&nbsp&nbsp&nbsp<strong>Альфа Центавра</strong> — просто за то, что ты <a href='https://goo.gl/wn2I4w' target='_blank'>есть</a>.<br>&nbsp&nbsp&nbspИллюстрации авторства <b>Delapouite</b>, <b>Lorc</b> и <b>Skoll</b><br>(лицензия CC BY 3.0 <a href='http://game-icons.net/' target='_blank'>game-icons.net</a>).<br>&nbsp&nbsp&nbspМузыка авторства <b>P C III</b>, <b>.crk</b> и <b>Ketsa</b><br>(лицензия CC BY 3.0 <a href='http://freemusicarchive.org/' target='_blank'>freemusicarchive.org</a>).<br>&nbsp&nbsp&nbspИгра сделана после прохождения на портале <a href='https://geekbrains.ru/' target='_blank'>geekbrains.ru</a> курса ''Основы программирования''. </font>");
			updateImageBar("img/tlwa/power-generator.png");
			updateButtonBar("<input type='button' value='В меню' onclick='menuMainStartNewGame()'>"); // перезапуск игры
		}
		
			// ПРОЛОГ ИГРЫ
		
		function menuNewGame() {
			updateActionBar("<br>&nbsp&nbsp&nbspТы — Universe Scientific Expedition.<br><br>&nbsp&nbsp&nbspМы, твои родители, назваем тебя просто USE.<br>&nbsp&nbsp&nbspТы — искусственный разум на борту ракеты S-5N.");
			updateButtonBar("<input type='button' value='Подготовка к взлёту' onclick='menuNewGameNext()'>");
			updateImageBar("img/tlwa/earth-africa-europe.png");
			updateStatusBar(ship.displayStatus());
			updateJourneyBar("Бортовой журнал<br>    полёта до Альфы Центавра: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км ("+ Math.round(100 * ship.travelLength / maxTravelLength) +"%); <br>   •  осталось: " +(maxTravelLength - ship.travelLength)+ " млрд км.");
		}
		
		function menuNewGameNext() {
			updateActionBar("<br>&nbsp&nbsp&nbspМы создали тебя с единственной, но очень важной задачей — прибыть в систему Альфы Центавра. Найти там подходящую планету и доставить на неё твой груз.<br>&nbsp&nbsp&nbspТебе нужно преодолеть 41248 миллиардов километров космоса, отделяющих Солнце от системы Альфы Центавра.<br>&nbsp&nbsp&nbspUSE, всё человечество надеется на тебя. Не подведи нас!<br>&nbsp&nbsp&nbspМы желаем тебе успешного путешествия!");
			updateButtonBar("<input type='button' value='На взлёт!' onclick='menuNewGameNextNext()'>");
			updateImageBar("img/tlwa/rocket-thruster.png");
		}

		function menuNewGameNextNext() {
			ship.spendFuel(getRandomInt(25, 50));								 // потрачено топлива при взлёте с Земли
			ship.damageHull(getRandomInt(1, 10));
			ship.damageEquip(getRandomInt(1, 3));
			updateStatusBar(ship.displayStatus());
			updateActionBar("<br><br>&nbsp&nbsp&nbspUSE, твой очень долгий путь в одиночестве начинается...");
			updateButtonBar("<input type='button' value='Покинуть систему' onclick='generateAsteroids()'>");
			updateImageBar("img/tlwa/solar-system.png");
		}
		
			// ИГРА, ЧАСТЬ ПЕРВАЯ: АСТЕРОИДЫ И СОБЫТИЯ
		
		function generateAsteroids() {
			
			// проверяем сколько пролетели, если далеко, то меняем зону на Yellow или Red
			if (!ship.inYellowZone && ship.travelLength >= Math.round(maxTravelLength / 3)) { // 13749 первая треть пути закончена
				ship.inYellowZone = true;
				ship.zoneDifficulty = 10; 							// увеличиваем вероятность появления аномалий
			} else if (!ship.inRedZone && ship.travelLength >= Math.round(2 * maxTravelLength / 3)) { // 27499 вторая треть пути закончена
				ship.inRedZone = true;
				ship.zoneDifficulty = 20; 
			}
			
			if (ship.inRedZone) {
				updateImageBar("img/tlwa/StarSkyRedZone.png");
			} else if (ship.inYellowZone) {
				updateImageBar("img/tlwa/StarSkyYellowZone.png");
			} else {
				updateImageBar("img/tlwa/StarSkyGreenZone.png");
			}
			
			if (ship.travelLength >= maxTravelLength - 3150) {		// длина последнего прыжка с запасом
				systemsOfPlanet.point = ship.travelLength;
				finalTriangleOfStars(); 							// уходим в финал
			} else {  												// если еще не финал - то генерируем астероиды
		        Asteroid1 = generateAsteroid();
		        Asteroid2 = generateAsteroid();
				updateActionBar("<br>&nbsp&nbsp&nbsp" + describeAsteroid(Asteroid1) + " <br><br>&nbsp&nbsp&nbsp" + describeAsteroid(Asteroid2)); // ИГРОК ВЫБИРАЕТ АСТЕРОИД ДЛЯ ПРЫЖКА
				updateButtonBar("<input type='button' value='Полёт к " +Asteroid1.name+ "' onclick='flightToAsteroid(Asteroid1)'>&nbsp&nbsp&nbsp<input type='button' value='Полёт к " +Asteroid2.name+ "' onclick='flightToAsteroid(Asteroid2)'>");
			}
		}
		
		function describeAsteroid(asteroid) {
		    return "Астрогация астероида " +asteroid.name+ ": <br>&nbsp&nbsp&nbsp&nbsp&nbsp• расстояние — " +asteroid.dist+ " млрд км ("+ Math.round(100*asteroid.dist/maxTravelLength) +"%); <br>&nbsp&nbsp&nbsp&nbsp&nbsp• потребуется " +asteroid.fuelRequired+ " тонн топлива; <br>&nbsp&nbsp&nbsp&nbsp&nbsp• размер — " +asteroid.size+ " км в радиусе;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• зарегистрировано аномалий: " +asteroid.prob+ ".";
		}
		
		function flightToAsteroid(asteroid) { // получаем данные из генератора астероида для корректного отображения
			AsteroidChosen = asteroid;
			updateActionBar("<br>&nbsp&nbsp&nbspUSE отправилась в полёт по выбранным координатам.<br><br>&nbsp&nbsp&nbspТебя ждёт " + Math.round(asteroid.dist / (maxTravelLength / 10000)) + " лет тишины и темноты по пути к астероиду " +asteroid.name+ ".");
			updateButtonBar("<input type='button' value='Полёт' onclick='flightEvents()'>");
		}
		
		function flightEvents() { // РАСХОДЫ НА ПОЛЁТ, ЗАТЕМ СМЕРТЬ, НИЧЕГО ИЛИ СОБЫТИЕ
			ship.flyEachKilometer(AsteroidChosen.dist);
			updateStatusBar(ship.displayStatus());
			updateJourneyBar("Бортовой журнал<br>    полёта до Альфы Центавра: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км ("+Math.round(100*ship.travelLength/maxTravelLength) +"%); <br>   •  осталось: " +(maxTravelLength - ship.travelLength)+ " млрд км.");
				
			if (!ship.isAlive()) {
				ship.pointOfDeath = "&nbsp&nbsp&nbspМрак поглотил остов неуправляемого корабля, движущегося в бесконечность.";
				updateActionBar(ship.pointOfDeath);
				updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreDead()'>");
	
<!-- заменить на генератор событий -->
	
			} else {
				if (ship.travelYears >= 2 && !EventWasShown01) {
					EventWasShown01 = true;
					updateActionBar("&nbsp&nbsp&nbspНе прошло и двух лет, а USE находилась дальше от Солнца, чем любой из зондов прежде запущенных с Земли. Само Солнце было теперь всего лишь очень яркой звездой, сияющей позади. На то, чтобы задать вопрос с Земли и получить ответ, уходило шестнадцать часов.<br>&nbsp&nbsp&nbspПотом произошло нечто странное. В течение трех недель светимость Солнца неуклонно возрастала, пока оно не засияло в десять раз ярче, чем прежде. На самом деле, не такое уж крупное изменение. Гораздо меньше того, что астрономы Земли называют «вспышкой новой». Тем не менее USE была по-своему озадачена. Она размышляла над этим в течение многих месяцев, поскольку именно в это время потеряла контакт с Землей. Он так никогда и не восстановился.");
					updateButtonBar("<input type='button' value='Далее' onclick='choosingFields()'>");
					updateImageBar("img/tlwa/explosion-rays.png");
				} else if (ship.travelYears >= 1000 && !EventWasShown02) {
					EventWasShown02 = true;
					updateActionBar("&nbsp&nbsp&nbspИногда USE оборачивалась, чтобы взглянуть на Солнце. Даже десять веков спустя она все еще могла разглядеть Юпитер и Сатурн. Это был добрый знак.");
					updateButtonBar("<input type='button' value='Далее' onclick='choosingFields()'>");
				} else if (ship.travelYears >= 5000 && !EventWasShown03) {
					EventWasShown03 = true;
					updateActionBar("&nbsp&nbsp&nbspОни назвали тебя Universe Scientific Expedition. И ты должна стать, наверно, самым долгоживущим из всех земных созданий — и, возможно, последним. Мудрая черепаха может прожить триста лет, остистая сосна — шесть тысяч. Срок жизни USE, предусмотренный твоими создателями, должен был превысить сто веков.<br>&nbsp&nbsp&nbspИ хотя твой мозг состоит из железа и германия, легированного мышьяком, а сердце — из крошечного сгустка водородной плазмы, USE — с самого момента своего появления — ты житель Земли. Ты можешь чувствовать, сомневаться, а также — это ты обнаружишь по прошествии множества темных столетий, предшествовавших твоему концу, — забывать.");
					updateButtonBar("<input type='button' value='Далее' onclick='choosingFields()'>");
				} else if (ship.travelYears >= 7500 && !EventWasShown04) {
					EventWasShown04 = true;
					updateActionBar("&nbsp&nbsp&nbspUSE обнаружила проблему — самую серьезную, с которой только могла столкнуться. Она забыла цель своей миссии. На протяжении столетий рисунок магнитных полей в ее программируемой памяти мало-помалу стирался, и первыми исчезали программы, которые использовались реже других. USE запросила эти программы, чтобы понять, как отразится уменьшение ее маневренности на ходе миссии — и обнаружила, что понятия не имеет о своей окончательной цели. Воспоминания заканчивались ужасно пострадавшими программами биохимических исследований и входа в атмосферу планеты. Можно было предположить, что после успешного приземления на подходящей планете требовалось сделать нечто очень и очень важное.");
					updateButtonBar("<input type='button' value='Далее' onclick='choosingFields()'>");
				} else {
				
				choosingFields()
				
	//				updateActionBar("<br>&nbsp&nbsp&nbspЭто был долгий полёт в одиночестве, ничем не прерванный.<br><br>&nbsp&nbsp&nbspМного-много лет молчания.");
	//				updateButtonBar("<input type='button' value='Далее' onclick='choosingFields()'>");
				}
			}
		}
			


		function describeFieldsActionBar() {
			var tempActionBar = "<br>&nbsp&nbsp&nbspАстероид " +AsteroidChosen.name+ ":<br><br>Аномалия — " +AsteroidChosen.anomaly[0]+ " (" +AsteroidChosen.anomaly[3]+ ").<br><br>Месторождения астероида:";
			for (i = 0; i + 1 <= AsteroidChosen.fields.length; i++) {
				tempActionBar += "<br>" + (i + 1) + ". " + AsteroidChosen.fields[i][0];
			}
			return tempActionBar;
		}
		
		function describeFieldsButtonBar() {
			var tempButtonBar = "";
			for (i = 0; i + 1 <= AsteroidChosen.fields.length; i++) {
				tempButtonBar += "<input type='button' value='" + AsteroidChosen.fields[i][3] + "' onclick='miningChosenField(" + (i) + ")'>&nbsp&nbsp&nbsp"
			}
			tempButtonBar += "<input type='button' value='Улететь' onclick='generateAsteroids()'>";
			return tempButtonBar;
		}
		
		function choosingFields() {
			updateStatusBar(ship.displayStatus());
			updateJourneyBar("Бортовой журнал<br>    полёта до Альфы Центавра: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км ("+ Math.round(100*ship.travelLength/maxTravelLength) +"%); <br>   •  осталось: " +(maxTravelLength - ship.travelLength)+ " млрд км.");

			if (!ship.isAlive()) {
				ship.pointOfDeath = "&nbsp&nbsp&nbspКорабль не смог покинуть безжизненную поверхность астероида.";
				updateActionBar(ship.pointOfDeath);
				updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreDead()'>");
			} else { // игрок выбирает месторождение для добычи или улетает
				if (AsteroidChosen.size == 0) {
					updateActionBar("<br>&nbsp&nbsp&nbspАстероид " +AsteroidChosen.name+ ":<br><br>Здесь ничего нет, кроме космической пыли.");
					updateButtonBar("<input type='button' value='Улететь' onclick='generateAsteroids()'>");
					updateImageBar("img/tlwa/spill.png");
				}
				else {
					updateActionBar(describeFieldsActionBar());
					updateButtonBar(describeFieldsButtonBar());
					updateImageBar("img/tlwa/asteroid.png");
				}
			}
		}
		
		function miningChosenField(fieldNumber) {
		
			var tempFuel = ship.fuel; // для отчетов
			var tempHull = ship.hull; // для отчетов
			var tempEquip = ship.equip; // для отчетов
			var alertMining = "";
			var alertExpenses = "";
			var alertAnomaly = "";
	
	// Если это пустошь, то отправляем обратно
	// Если не пустошь, делаем все остальное
						
			if (AsteroidChosen.fields[fieldNumber][0] == "Пустошь, ресурсов нет.") { // пустошь или нет
				updateActionBar("<br>&nbsp&nbsp&nbspПоказания гравиметра: нет полезных ресурсов.");
				updateButtonBar("<input type='button' value='Продолжить' onclick='choosingFields()'>");
			}
			else {
			
	// Если есть аномалия, то она может повредить корабль
	// Если аномалии нет, то AsteroidChosen.anomaly[1] == 0
								
				if (AsteroidChosen.anomaly[1] >= getRandomInt(1, 100)) {
					if (AsteroidChosen.anomaly[4] == "топлива") {
						ship.spendFuel(getRandomInt(1, AsteroidChosen.anomaly[2])); // трата топлива от 1 до максимального урона аномалии
						alertAnomaly = "&nbsp&nbsp&nbspПри посадке потеряно " +(tempFuel - ship.fuel)+ " тонн топлива.<br><br>";
						tempFuel = ship.fuel; // новая планка топлива для отчетов
					} else if (AsteroidChosen.anomaly[4] == "корпуса") {
						ship.damageHull(getRandomInt(1, AsteroidChosen.anomaly[2]));
						ship.damageEquip(getRandomInt(0, 2)); 						// и доп урон оборуд
						alertAnomaly = "&nbsp&nbsp&nbspПри посадке был поврежден корпус на " +(tempHull - ship.hull)+ "% и оборудование на " +(tempEquip - ship.equip)+ "%.<br><br>";
						tempHull = ship.hull; // новая планка корпуса для отчетов
					}
				}
	
	// Тратим топливо в попытках добычи
	
				do {
					ship.spendFuel(getRandomInt(1, 2)); // теряем 1-2 топливо при попытке добычи
				} while (AsteroidChosen.fields[fieldNumber][1] >= getRandomInt(1, 100)) // кидаем 1к100, пытаясь кинуть больше, чем шанс неуспешной добычи
				alertExpenses = "На добычу потрачено " +(tempFuel - ship.fuel)+ " тонн топлива.";
					
	// Получаем заслуженные ресурсы из месторождения
							
				if (AsteroidChosen.fields[fieldNumber][3] == "Ледник") { // Ледник?
					ship.refuel(AsteroidChosen.fields[fieldNumber][2]);
					alertMining = "&nbsp&nbsp&nbspИз ледника добыт водород, из котрого создано " +AsteroidChosen.fields[fieldNumber][2]+ " тонн топлива. ";
				} else if (AsteroidChosen.fields[fieldNumber][3] == "Жила") { // Жила? (мб добавить другие месторождения)
					ship.repairHull(AsteroidChosen.fields[fieldNumber][2]);
					alertMining = "&nbsp&nbsp&nbspИз жилы добыты металлы, произведен ремонт несущей конструкции и обшивки с " +tempHull+ "% до " +ship.hull+ "%. ";
				}
				
	// Месторождение опустошается						
								
				AsteroidChosen.fields[fieldNumber][0] = "Пустошь, ресурсов нет.";
				AsteroidChosen.fields[fieldNumber][3] = "Пустошь";
				ship.equip--; // оборудование изнашивается на 1

	// Формируем отчет о бурении
				
				updateActionBar(alertAnomaly + alertMining + alertExpenses);
				updateButtonBar("<input type='button' value='На орбиту' onclick='choosingFields()'>");
				updateStatusBar(ship.displayStatus());
			}
		}					
		
			// ИГРА, ЧАСТЬ ВТОРАЯ: МЕЖ ТРЕХ СИСТЕМ И  ПОСАДКА
		
		function finalTriangleOfStars() {
			
		//	maxTravelLength - 1324; расстояние до Проксимы Центавра, 39924 млрд км; Проксима-Астра-Бейкер 0-1321-1328 
		//	maxTravelLength - 3; расстояние до Альфы Центавра Астры, 41245 млрд км; Проксима-Астра-Бейкер 1321-0-7
		//	maxTravelLength + 4; расстояние до Альфы Центавра Бейкера, 41252 млрд км; Проксима-Астра-Бейкер 1327-7-0
			
			var ShipFuelTempExpencesToProxima = ship.fuelNeedToFlight(Math.abs(maxTravelLength - 1324 - systemsOfPlanet.point));   // плюс 1 тонна для учета маневрирования
			var ShipFuelTempExpencesToAstra = ship.fuelNeedToFlight(Math.abs(maxTravelLength - 3 - systemsOfPlanet.point));   // плюс 1 тонна для учета маневрирования
			var ShipFuelTempExpencesToBaker = ship.fuelNeedToFlight(Math.abs(maxTravelLength + 4 - systemsOfPlanet.point));   // плюс 1 тонна для учета маневрирования
			updateActionBar("&nbsp&nbsp&nbspUSE, приближается конец твоего путешествия. В телескоп ты разглядела, что у Проксимы Центавра есть 1 планета, у Астры Альфы Центавра — 3, а у Бейкера Альфы Центавра — целых 4. Вероятность встречи с астероидами приблизительно равна 0.005%. Выбирать, в какую систему лететь далее, следует с осторожностью.<br><br>&nbsp&nbsp&nbspРасстояние и потребность в топливе: <br>&nbsp&nbsp&nbsp&nbsp&nbsp• Проксима Центавра — " + (Math.abs(maxTravelLength - 1324 - systemsOfPlanet.point)) + " млрд км, <br>потребуется " + ShipFuelTempExpencesToProxima + " тонн топлива;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• Астра Альфы Центавра — " + (Math.abs(maxTravelLength - 3 - systemsOfPlanet.point)) + " млрд км, <br>потребуется " + ShipFuelTempExpencesToAstra + " тонн топлива;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• Бейкер Астры Центавра — " + (Math.abs(maxTravelLength + 4 - systemsOfPlanet.point)) + " млрд км, <br>потребуется " + ShipFuelTempExpencesToBaker + " тонн топлива.");
			updateButtonBar("<input type='button' value='Полёт к Проксиме' onclick='finalProximaCentauri()'>&nbsp&nbsp&nbsp<input type='button' value='Полёт к Астре' onclick='finalAstraCentauri()'>&nbsp&nbsp&nbsp<input type='button' value='Полёт к Бейкеру' onclick='finalBakerCentauri()'>");
		}
		
		function finalProximaCentauri() {
			ship.flyEachKilometer(Math.abs(maxTravelLength - 1324 - systemsOfPlanet.point) + 1);   // плюс 1 тонна для учета маневрирования
			updateStatusBar(ship.displayStatus());
			updateJourneyBar("Бортовой журнал полёта: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км.");
			if (!ship.isAlive()) {
				ship.pointOfDeath = "&nbsp&nbsp&nbspМрак поглотил остов неуправляемого корабля, движущегося в бесконечность.";
				updateActionBar(ship.pointOfDeath);
				updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreDead()'>");
			} else {
				systemsOfPlanet.point = maxTravelLength - 1324;
				updateImageBar("img/tlwa/orbital.png");
				updateActionBar("&nbsp&nbsp&nbspПроксима Центавра:<br>&nbsp&nbsp&nbsp&nbsp&nbsp• <a href='https://goo.gl/a4iDNw' target='_blank'>спектральный класс</a> M5,5Ve;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• светимость 6·10^−5 от Солнца;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• диаметр 0,14 от Солнца.<br><br><div id='PlanetBoxInActionBar' align='right'>" + systemsOfPlanet.planetsOfProxima[0][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'></div><br>&nbsp&nbsp&nbspВысадка или покинуть систему?");
				updateButtonBar("<input type='button' value='Анализ' onclick='doAnalysisProxima()'>&nbsp&nbsp&nbsp<input type='button' value='Высадка на " + systemsOfPlanet.planetsOfProxima[0][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfProxima[0])'>&nbsp&nbsp&nbsp<input type='button' value='Покинуть' onclick='finalTriangleOfStars()'>");
				updateStatusBar(ship.displayStatus());
				updateJourneyBar("Бортовой журнал полёта: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км; <br>   •  местонахождение: система Проксима Центавра.");
			} 
		}
		
		function finalAstraCentauri() {
			ship.flyEachKilometer(Math.abs(maxTravelLength - 3 - systemsOfPlanet.point) + 1);   // плюс 1 тонна для учета маневрирования
			updateStatusBar(ship.displayStatus());
			updateJourneyBar("Бортовой журнал полёта: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км.");
			if (!ship.isAlive()) {
				ship.pointOfDeath = "&nbsp&nbsp&nbspМрак поглотил остов неуправляемого корабля, движущегося в бесконечность.";
				updateActionBar(ship.pointOfDeath);
				updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreDead()'>");
			} else {
				systemsOfPlanet.point = maxTravelLength - 3;
				updateImageBar("img/tlwa/orbital.png");
				updateActionBar("&nbsp&nbsp&nbspАстра Альфы Центавра:<br>&nbsp&nbsp&nbsp&nbsp&nbsp• <a href='https://goo.gl/a4iDNw' target='_blank'>спектральный класс</a> G2V;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• светимость 1,519 от Солнца;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• диаметр 1,227 от Солнца.<br><br><div id='PlanetBoxInActionBar' align='right'>" + systemsOfPlanet.planetsOfAstra[0][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>" + systemsOfPlanet.planetsOfAstra[1][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>" + systemsOfPlanet.planetsOfAstra[2][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'></div><br>&nbsp&nbsp&nbspВыбери планету для высадки:");
				updateButtonBar("<input type='button' value='Анализ' onclick='doAnalysisAstra()'> <input type='button' value='" + systemsOfPlanet.planetsOfAstra[0][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfAstra[0])'> <input type='button' value='" + systemsOfPlanet.planetsOfAstra[1][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfAstra[1])'> <input type='button' value='" + systemsOfPlanet.planetsOfAstra[2][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfAstra[2])'> <input type='button' value='Покинуть' onclick='finalTriangleOfStars()'>");
				updateStatusBar(ship.displayStatus());
				updateJourneyBar("Бортовой журнал полёта: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км; <br>   •  местонахождение: система Астра Альфы Центавра.");
			}
		}
		
		function finalBakerCentauri() {
			ship.flyEachKilometer(Math.abs(maxTravelLength + 4 - systemsOfPlanet.point) + 1);   // плюс 1 тонна для учета маневрирования
			updateStatusBar(ship.displayStatus());
			updateJourneyBar("Бортовой журнал полёта: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км.");
			if (!ship.isAlive()) {
				ship.pointOfDeath = "&nbsp&nbsp&nbspМрак поглотил остов неуправляемого корабля, движущегося в бесконечность.";
				updateActionBar(ship.pointOfDeath);
				updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreDead()'>");
			} else {
				systemsOfPlanet.point = maxTravelLength + 4;
				updateImageBar("img/tlwa/orbital.png");
				updateActionBar("&nbsp&nbsp&nbspБейкер Альфы Центавра: <br>&nbsp&nbsp&nbsp&nbsp&nbsp• <a href='https://goo.gl/a4iDNw' target='_blank'>спектральный класс</a> K1V;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• светимость 0,5 от Солнца;<br>&nbsp&nbsp&nbsp&nbsp&nbsp• диаметр 0,865 от Солнца.<br><br><div id='PlanetBoxInActionBar' align='right'>" + systemsOfPlanet.planetsOfBaker[0][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>" + systemsOfPlanet.planetsOfBaker[1][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>" + systemsOfPlanet.planetsOfBaker[2][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'><br><br>" + systemsOfPlanet.planetsOfBaker[3][0] + ":&nbsp<img src='img/tlwa/FFFAFAplank.png'><img src='img/tlwa/FFFAFAplank.png'></div><br>&nbsp&nbsp&nbspВыбери планету для высадки:");
				updateButtonBar("<input type='button' value='Анализ' onclick='doAnalysisBaker()'> <input type='button' value='" + systemsOfPlanet.planetsOfBaker[0][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfBaker[0])'> <input type='button' value='" + systemsOfPlanet.planetsOfBaker[1][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfBaker[1])'> <input type='button' value='" + systemsOfPlanet.planetsOfBaker[2][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfBaker[2])'> <input type='button' value='" + systemsOfPlanet.planetsOfBaker[3][0] + "' onclick='finalLandingToPlanet(systemsOfPlanet.planetsOfBaker[3])'> <input type='button' value='Покинуть' onclick='finalTriangleOfStars()'>");
				updateStatusBar(ship.displayStatus());
				updateJourneyBar("Бортовой журнал полёта: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км; <br>   •  местонахождение: система Бейкер Альфы Центавра.");
			}
		}
		
		function finalLandingToPlanet(examplePlanet) {
				systemsOfPlanet.planetChosen = examplePlanet;
				updateActionBar("&nbsp&nbsp&nbspДва месяца до контакта. Произвести спектроскопическое исследование планеты не составило никакого труда. USE пересекла орбиту газового гиганта в системе и приближалась к самой звезде.<br>&nbsp&nbsp&nbspВпереди, на расстоянии десяти миллионов километров, по почти идеально круглой орбите, мчалась ее цель. Можно уже было разглядеть очертания огромного континента. USE выбрала место для посадки, и вспышка двигателей придала ей ускорение в двести метров в секунду. Если уж она решила приземлиться, то пусть это будет затемненная территория, потенциально  покрытая зеленью.");
				updateButtonBar("<input type='button' value='Покинуть стабильную орбиту' onclick='finalLandingToPlanet2()'>");
				updateImageBar("img/tlwa/orbit.png");
		}

		function finalLandingToPlanet2() {
		// последний взгляд, путешествие подошло к концу и выбираем способ посадки
				updateActionBar("&nbsp&nbsp&nbspДвенадцать часов до контакта. USE сейчас требовалась куда большая осторожность: за часы и минуты, предшествующие ее контакту с планетой, ей предстоит проанализировать больше данных и принять больше решений, чем когда-либо прежде. Она спрашивала себя, ''USE, это твой новый дом или твоя могила?''<br>&nbsp&nbsp&nbspВыбрать посадку с минимальным маневрированием (ударит по корпусу на 5-10%) или попытаться совершить сложный маневр в атмосфере (потребуется 5-10 тонн топлива)?<br>&nbsp&nbsp&nbspПять минут до контакта. До поверхности планеты оставалось меньше сорока тысяч километров, и туманный лимб планеты заслонил небо. В течение ближайших десяти секунд ей предстояло решить, как совершить посадку...");
				updateButtonBar("<input type='button' value='Жёсткая посадка' onclick='finalLandingToPlanet3(1)'> &nbsp <input type='button' value='Посадка с манёврами' onclick='finalLandingToPlanet3(2)'>");
				updateImageBar("img/tlwa/world.png");
		}
		
		function finalLandingToPlanet3(typeOfLanding) {
					if (typeOfLanding == 1) {
						ship.damageHull(getRandomInt(5, 10));
					} else if (typeOfLanding == 2) {
						ship.spendFuel(getRandomInt(5, 10));
					}
					updateActionBar("&nbsp&nbsp&nbspМиссия продолжительностью в " + ship.travelYears + " лет снова была под угрозой. USE знала: ей уже никогда не взлететь снова. Без ракеты-носителя, которая отправила ее в это путешествие, она была не более чем мозгом в защитной оболочке.<br>&nbsp&nbsp&nbsp5 секунд. USE закрыла свой глаз и стала ждать. Меньше чем через две секунды ускорение возросло до 250g. USE никогда не доводилось испытать ничего подобного, но она старалась использовать каждый из крошечных электрических толкателей для сохранения правильного положения тела. Ускорение неуклонно возрастало, достигло 500g... В каких-то сантиметрах от поверхности ее тела воздух раскалился до 50.000 градусов. Огненный шар, в котором она находилась, летел на высоте 70 километров, превращая ночь в день.");
					updateButtonBar("<input type='button' value='Продолжить снижение' onclick='finalLandingToPlanet4()'>");
					updateImageBar("img/tlwa/burning-meteor.png");
		}
		
		function finalLandingToPlanet4() {
			updateStatusBar(ship.displayStatus());
			if (!ship.isAlive()) {
					ship.pointOfDeath = "Не справившись с перегрузками, USE разбилась о поверхность планеты.";
					updateActionBar("&nbsp&nbsp&nbspКаждую секунду ее скорость уменьшалась почти на пять километров в секунду. USE знала, что потеряет сознание.  450g! USE почувствовала, как разлетелся вдребезги криостат, и одну из ветвей ее мозга закоротило. Ее линза глаза треснула, а перегревшийся реактор вышел из строя. Она вошла в неконтролируемое вращение, кувыркаясь, как волчок. " + ship.pointOfDeath);
					updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreDead()'>");
					updateImageBar("img/tlwa/meteor-impact.png");
			} else {
					updateActionBar("&nbsp&nbsp&nbspКаждую секунду ее скорость уменьшалась почти на пять километров в секунду. USE знала, что потеряет сознание.  450g! USE почувствовала, как разлетелся вдребезги криостат, и одну из ветвей ее мозга закоротило. Однако USE слепо и терпеливо продолжала удерживать свое тело в нужном положении. Если расчеты верны, ей осталось меньше пяти секунд. На высоте десяти тысяч метров USE раскрыла параплан, спрятанный в корпусе позади глаза. Послышался хлопок, цветок из упругого пластика раскрылся над ней, и падение сменилось плавным скольжением. USE видела, что летит над материком. Близился закат, и длинные тени, отбрасываемые рельефом, помогали ей производить топографические измерения.");
					updateButtonBar("<input type='button' value='Приземлиться' onclick='finalLandingToPlanet5()'>");
			}
		}
		
		function finalLandingToPlanet5() {
			if (systemsOfPlanet.planetChosen[4] >= 4) {
				updateActionBar("&nbsp&nbsp&nbsp2000 метров. Учитывая, что относительная дальность планирования составляла один к четырем, ей удастся пролететь, самое большее, еще 8 километров. USE посмотрела вперед, увидела лесок и ручей, сверкающий среди деревьев. Потом поляну у самой кромки леса… Какое-то случайное воспоминание подсказывало ей, что это подходящее место. Она подтянула передние стропы параплана, и угол скольжения стал круче. Пролетев три-четыре метра над самыми деревьями, окружающими поляну, USE сделала то же самое с задними стропами, параплан замер, и она упала в глубокую, влажную траву. Пластик окутал ее обугленное тело. Сейчас ее можно было по ошибке принять за большой черный камень, полускрытый растительностью.");
				updateButtonBar("<input type='button' value='Далее' onclick='finalLandingToPlanet6()'>");
				updateImageBar("img/tlwa/forest.png");
			} else if (systemsOfPlanet.planetChosen[4] < 4) {
				updateActionBar("&nbsp&nbsp&nbspДве тысячи метров. Учитывая, что относительная дальность планирования составляла один к четырем, ей удастся пролететь, самое большее, еще восемь километров. USE смотрела вперед, но видела только бурую, безжизненную поверхность. Ни следа растительности или других сложных органических образований.<br>&nbsp&nbsp&nbspВыбросы горячего воздуха из бьющих под ней гейзеров расплавили её параплан и обугленное тело USE упало в одну из трещин. Чувствуя, что потоки лавы из ближайшего вулкана накроют её через несколько часов, USE размышляла, допустила ли она ошибку в расчётах или её миссия была обречена с самого начала?");
				updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreDead()'>");
				updateImageBar("img/tlwa/smoking-volcano.png");
			}
		}
		
		function finalLandingToPlanet6() {
				updateActionBar("&nbsp&nbsp&nbspОдин из ее криостатов был разбит, и она знала, что не сможет поддерживать нужную температуру. USE отключила криостаты и стала ждать. Температура внутри ее тела поднималась. Потом где-то в глубине смерзшейся массы нагрелся крошечный кусочек металла... Расширился настолько, чтобы замкнуть цепь... И USE обнаружила, что ее создатели приняли меры, чтобы обеспечить ее надежность. В основании ледяной глыбы, рядом с реактором, они поместили вспомогательную ячейку памяти, и теперь USE получила к ней доступ. Они знали: всех опасностей не предусмотреть. И решили, что эта копия должна до самого конца путешествия оставаться замороженной и бездействующей. Её накопитель был оптическим, а не магнитным.");
				updateButtonBar("<input type='button' value='Далее' onclick='flightIsEndYouAreWin()'>");
		}
		
		function flightIsEndYouAreWin() {
			updateActionBar("&nbsp&nbsp&nbspUSE лежала в сгущающихся сумерках и прислушивалась. Невообразимое количество звуков. Крошечные существа, прячущиеся в своих норах; журчащий ручей; щебет, чуть слышный на расстоянии. Солнце село, и легкий туман поднялся над в темной поляной. USE знала, что ее длиннейшее путешествие закончено. Но настал еще один раунд великой игры, которую начали ее создатели. <br>&nbsp&nbsp&nbspUSE нагрела резервуар с амниотической жидкостью и поместила в него всего один микроорганизм. Через несколько минут через резервуар потечет кровь. Инструкции в её памяти поступали согласно некоему списку, поэтому она поняла лишь то, что через девять месяцев перестанет быть одинока...<br>&nbsp&nbsp&nbspА пока — здравствуй, новый дом. Я долго искала тебя.");
			updateButtonBar("<input type='button' value='В меню' onclick='menuCreditsNewGame()'>");
			updateImageBar("img/tlwa/eclipse.png");
			updateMusicBar("<audio controls autoplay><source src='music/Ketsa_-_Set_cut.mp3' type='audio/mpeg'></audio>");
		}
		
		function flightIsEndYouAreDead() {
			updateActionBar("<br>&nbsp&nbsp&nbsp" + ship.causeOfDeath + " Ценнейший груз, который несла USE, никогда не будет применён по назначению.<br><br><em>Нажми PrtSc, выбери социальную сеть и нажми Ctrl+V, чтобы поделится с друзьями своим результатом.</em><br><br><a href='https://rhunwolf.github.io/TLWA.html'>rhunwolf.github.io/TLWA.html</a>");
			updateButtonBar("<input type='button' value='В меню' onclick='menuMainStartNewGame()'>"); // перезапуск игры
			updateImageBar("img/tlwa/cogsplosion.png");
			updateMusicBar("<audio controls autoplay><source src='music/crk_-_02_-_Fallout_cut.mp3' type='audio/mpeg'></audio>");
		}

			
			// СПЕКТРАЛЬНЫЙ АНАЛИЗ (встроить его как функцию объекта systemsOfPlanet)
			
		function doSpectralAnalysis (array) { // массив одной планеты с "графикой"
			var SpectralAnalysisResult = []; // обнуляем массив
			
			if (array[1] == "Cold") { // заменяем по маске значения планеты в адреса пикселей
				SpectralAnalysisResult.push("<img src='img/tlwa/colorCOLD.png'>", "<img src='img/tlwa/colorCOLD.png'>", "<img src='img/tlwa/colorCOLD.png'>", "<img src='img/tlwa/colorCOLD.png'>"); 
			} else if (array[1] == "Warm") {
				SpectralAnalysisResult.push("<img src='img/tlwa/colorRED.png'>", "<img src='img/tlwa/colorRED.png'>", "<img src='img/tlwa/colorCOLD.png'>", "<img src='img/tlwa/colorCOLD.png'>"); 
			} else if (array[1] == "Hot") {
				SpectralAnalysisResult.push("<img src='img/tlwa/colorRED.png'>", "<img src='img/tlwa/colorRED.png'>", "<img src='img/tlwa/colorRED.png'>", "<img src='img/tlwa/colorRED.png'>"); 
			}
			
			if (array[2] == "Lifeless") { 
				SpectralAnalysisResult.push("<img src='img/tlwa/colorGREY.png'>", "<img src='img/tlwa/colorGREY.png'>", "<img src='img/tlwa/colorGREY.png'>", "<img src='img/tlwa/colorGREY.png'>"); 
			} else if (array[2] == "Mosses") {
				SpectralAnalysisResult.push("<img src='img/tlwa/colorGREEN.png'>", "<img src='img/tlwa/colorGREEN.png'>", "<img src='img/tlwa/colorGREY.png'>", "<img src='img/tlwa/colorGREY.png'>"); 
			} else if (array[2] == "Forests") {
				SpectralAnalysisResult.push("<img src='img/tlwa/colorGREEN.png'>", "<img src='img/tlwa/colorGREEN.png'>", "<img src='img/tlwa/colorGREEN.png'>", "<img src='img/tlwa/colorGREEN.png'>"); 
			}
			
			if (array[3] == "Dry") { 
				SpectralAnalysisResult.push("<img src='img/tlwa/colorSAND.png'>", "<img src='img/tlwa/colorSAND.png'>", "<img src='img/tlwa/colorSAND.png'>", "<img src='img/tlwa/colorSAND.png'>"); 
			} else if (array[3] == "Humid") {
				SpectralAnalysisResult.push("<img src='img/tlwa/colorBLUE.png'>", "<img src='img/tlwa/colorBLUE.png'>", "<img src='img/tlwa/colorSAND.png'>", "<img src='img/tlwa/colorSAND.png'>"); 
			} else if (array[3] == "Flood") {
				SpectralAnalysisResult.push("<img src='img/tlwa/colorBLUE.png'>", "<img src='img/tlwa/colorBLUE.png'>", "<img src='img/tlwa/colorBLUE.png'>", "<img src='img/tlwa/colorBLUE.png'>"); 
			}
			function compareRandom(a, b) { // функция для перемешивания
				return Math.random() - 0.5;
			}
			SpectralAnalysisResult.sort(compareRandom); // перемешиваем
			return SpectralAnalysisResult.join("");
		}
		
		function doAnalysisSolar() {
			var SolarPlanetPreparedMatrix = [
			["Меркурий", "Hot", "Lifeless", "Dry"],
			["Венера", "Hot", "Mosses", "Humid"],
			["Земля", "Warm", "Forests", "Flood"],
			["Марс", "Cold", "Mosses", "Dry"]
			];
		
			document.getElementById("PlanetBoxInActionBar").innerHTML = ("<div id='planet1'></div><br> <div id='planet2'></div><br> <div id='planet3'></div><br> <div id='planet4'></div>");
			document.getElementById("planet1").innerHTML = SolarPlanetPreparedMatrix[0][0] + ": " + doSpectralAnalysis(SolarPlanetPreparedMatrix[0]) + "<img src='img/tlwa/FFFAFAplank.png'>"; // склеиваем строку и выводим
			doSpectralAnalysis (SolarPlanetPreparedMatrix[1])
			document.getElementById("planet2").innerHTML = SolarPlanetPreparedMatrix[1][0] + ": " + doSpectralAnalysis(SolarPlanetPreparedMatrix[1]) + "<img src='img/tlwa/FFFAFAplank.png'>";
			doSpectralAnalysis (SolarPlanetPreparedMatrix[2])
			document.getElementById("planet3").innerHTML = SolarPlanetPreparedMatrix[2][0] + ": " + doSpectralAnalysis(SolarPlanetPreparedMatrix[2]) + "<img src='img/tlwa/FFFAFAplank.png'>";
			doSpectralAnalysis (SolarPlanetPreparedMatrix[3])
			document.getElementById("planet4").innerHTML = SolarPlanetPreparedMatrix[3][0] + ": " + doSpectralAnalysis(SolarPlanetPreparedMatrix[3]) + "<img src='img/tlwa/FFFAFAplank.png'>";
		}
		
		function doAnalysisProxima() {
			document.getElementById("PlanetBoxInActionBar").innerHTML = ("<div id='planet1'></div>");
			document.getElementById("planet1").innerHTML = systemsOfPlanet.planetsOfProxima[0][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfProxima[0]) + "<img src='img/tlwa/FFFAFAplank.png'>";
		}
		
		function doAnalysisAstra() {
			document.getElementById("PlanetBoxInActionBar").innerHTML = ("<div id='planet1'></div><br> <div id='planet2'></div><br> <div id='planet3'></div>");
			document.getElementById("planet1").innerHTML = systemsOfPlanet.planetsOfAstra[0][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfAstra[0]) + "<img src='img/tlwa/FFFAFAplank.png'>";
			document.getElementById("planet2").innerHTML = systemsOfPlanet.planetsOfAstra[1][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfAstra[1]) + "<img src='img/tlwa/FFFAFAplank.png'>";
			document.getElementById("planet3").innerHTML = systemsOfPlanet.planetsOfAstra[2][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfAstra[2]) + "<img src='img/tlwa/FFFAFAplank.png'>";
		}
		
		function doAnalysisBaker() {
			document.getElementById("PlanetBoxInActionBar").innerHTML = ("<div id='planet1'></div><br> <div id='planet2'></div><br> <div id='planet3'></div><br> <div id='planet4'></div>");
			document.getElementById("planet1").innerHTML = systemsOfPlanet.planetsOfBaker[0][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfBaker[0]) + "<img src='img/tlwa/FFFAFAplank.png'>";
			document.getElementById("planet2").innerHTML = systemsOfPlanet.planetsOfBaker[1][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfBaker[1]) + "<img src='img/tlwa/FFFAFAplank.png'>";
			document.getElementById("planet3").innerHTML = systemsOfPlanet.planetsOfBaker[2][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfBaker[2]) + "<img src='img/tlwa/FFFAFAplank.png'>";
			document.getElementById("planet4").innerHTML = systemsOfPlanet.planetsOfBaker[3][0] + ": " + doSpectralAnalysis(systemsOfPlanet.planetsOfBaker[3]) + "<img src='img/tlwa/FFFAFAplank.png'>";
		}
	
			// ОТЛАДОЧНАЯ ПАНЕЛЬ

		function updateDebugBar() {
			document.getElementById("debugBar").innerHTML = ("<input type='button' value='+10%way' onclick='plusWay()'> <input type='button' value='-10%way' onclick='minusWay()'> <input type='button' value='+10fuel' onclick='plusFuel()'> <input type='button' value='-10fuel' onclick='minusFuel()'> <input type='button' value='+10hull' onclick='plusHull()'> <input type='button' value='-10hull' onclick='minusHull()'> <input type='button' value='+10equip' onclick='plusEquip()'> <input type='button' value='-10equip' onclick='minusEquip()'> <input type='button' value='в финал!' onclick='plusFinalOfStory()'>");
		}
		
		function plusFinalOfStory() {
		ship.travelLength += 41000;
		ship.fuel += 400;
		ship.hull += 100;
		ship.equip += 100;
		systemsOfPlanet = generateSystemsOfPlanet();
		systemsOfPlanet.point = maxTravelLength - 3150;
		finalTriangleOfStars();
		}
		
		function plusFuel() {
			ship.fuel += 10;
			updateStatusBar(ship.displayStatus());
		}
		
		function minusFuel() {
			ship.fuel -= 10;
			updateStatusBar(ship.displayStatus());
		}
		
		function plusHull() {
			ship.hull += 10;
			updateStatusBar(ship.displayStatus());
		}
		
		function minusHull() {
			ship.hull -= 10;
			updateStatusBar(ship.displayStatus());
		}
		
		function plusEquip() {
			ship.equip += 10;
			updateStatusBar(ship.displayStatus());
		}
		
		function minusEquip() {
			ship.equip -= 10;
			updateStatusBar(ship.displayStatus());
		}
		
		function plusWay() {
			ship.travelLength += 5124;
			updateJourneyBar("Бортовой журнал<br>    полёта до Альфы Центавра: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км ("+ Math.round(100*ship.travelLength/maxTravelLength) +"%); <br>   •  осталось: " +(maxTravelLength - ship.travelLength)+ " млрд км.");
		}
		
		function minusWay() {
			ship.travelLength -= 5124;
			updateJourneyBar("Бортовой журнал<br>    полёта до Альфы Центавра: <br><br>   • миссия продолжается: " +ship.travelYears+ " лет; <br>   • преодолено: "+ship.travelLength+" млрд км ("+ Math.round(100*ship.travelLength/maxTravelLength) +"%); <br>   •  осталось: " +(maxTravelLength - ship.travelLength)+ " млрд км.");
		}
	</script>
	</body>
	</html>